<!DOCTYPE html>
<html>
<head>
    <title>Security Score Trajectories</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div>
        <label for="systemsInput">Number of Systems (M):</label>
        <input type="number" id="systemsInput" placeholder="Enter M" min="1" value="4">
        <label for="attacksInput">Number of Attacks (N):</label>
        <input type="number" id="attacksInput" placeholder="Enter N" min="1" value="10">
        <label for="probabilityInput">Penetration Probability (p):</label>
        <input type="number" id="probabilityInput" placeholder="Enter p" min="0" max="1" step="0.01" value="0.3">
        <button id="simulateButton">Simulate Trajectories</button>
    </div>
    <div>
        <canvas id="detailed-chart" width="800" height="400"></canvas>
    </div>

    <script>
        // Function to simulate security scores for M systems
        function simulateSecurityScores(M, N, p) {
            const scores = [];
            for (let i = 0; i < M; i++) {
                const systemScores = [];
                for (let j = 0; j < N; j++) {
                    // Simulate security score (-1 or 1) based on penetration probability
                    const score = Math.random() <= p ? -1 : 1;
                    systemScores.push(score);
                }
                scores.push(systemScores);
            }
            return scores;
        }

        // Function to draw a detailed chart for all system scores
        function drawDetailedChart(scores, M) {
            const ctx = document.getElementById("detailed-chart").getContext("2d");
            const colors = ['blue', 'red', 'green', 'purple']; // You can add more colors if needed
            const datasets = [];

            for (let i = 0; i < M; i++) {
                datasets.push({
                    label: `System ${i + 1}`,
                    data: scores[i],
                    borderColor: colors[i],
                    fill: false,
                });
            }

            const chart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: Array.from({ length: scores[0].length }, (_, i) => `Attack ${i + 1}`),
                    datasets,
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                        },
                        x: {
                            title: {
                                display: true,
                                text: "Attacks",
                            },
                        },
                    },
                },
            });
        }

        // Event listener for the "Simulate Trajectories" button
        document.getElementById("simulateButton").addEventListener("click", () => {
            const M = parseInt(document.getElementById("systemsInput").value);
            const N = parseInt(document.getElementById("attacksInput").value);
            const p = parseFloat(document.getElementById("probabilityInput").value);

            const detailedChartCanvas = document.getElementById("detailed-chart");
            const ctx = detailedChartCanvas.getContext("2d");
            ctx.clearRect(0, 0, detailedChartCanvas.width, detailedChartCanvas.height);

            const scores = [];
            for (let i = 0; i < M; i++) {
                const systemScores = simulateSecurityScores(1, N, p)[0];
                scores.push(systemScores);
            }

            drawDetailedChart(scores, M);
        });
    </script>
</body>
</html>



